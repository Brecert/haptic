const l=[];let s,r;function p(t){const e=(...n)=>{if(!n.length)return s&&!e.cs.has(s)&&(e.cs.add(s),s.ws.push(e)),t;const[a]=n;if(r)return e.pending===l&&r.push(e),e.pending=a,a;t=a;const i=s;return s=void 0,e.csRun=new Set(e.cs),e.csRun.forEach(o=>{o.stale=!0}),e.csRun.forEach(o=>{o.stale&&o()}),s=i,t};return e.$o=1,e.cs=new Set,e.pending=l,e}function c(t){let e;const n=()=>{if(!n.stale)return s&&n.ws.forEach(i=>{i()}),e;const a=s;return a&&a.csNested.push(n),u(n),n.stale=!1,s=n,e=t(),s=a,e};return n.$o=1,n.stale=!0,n.ws=[],n.csNested=[],n(),n}function g(t){const e=c(t);return()=>u(e)}function u(t){t.csNested.forEach(u),t.ws.forEach(e=>{e.cs.delete(t),e.csRun&&e.csRun.delete(t)}),t.ws=[],t.csNested=[]}function f(t){const e=s,n=()=>{};n.ws=[],n.csNested=[],s=n,t(()=>{u(n),s=void 0}),s=e}function h(t){const e=r;r=[];const n=t(),a=r;return r=e,a.forEach(i=>{if(i.pending!==l){const{pending:o}=i;i.pending=l,i(o)}}),n}function d(t){const e=s;s=void 0;const n=t();return s=e,n}function m(t,e,n={onlyChanges:!1}){return c(()=>{t.forEach(i=>{i()});let a;return n.onlyChanges&&(a=d(e)),n.onlyChanges=!1,a})}export{c,f as capture,c as computed,m as on,p as s,d as sample,p as signal,g as subscribe,h as transaction,u as unsubscribe};
//# sourceMappingURL=index.js.map
